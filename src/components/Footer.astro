---
import { getLocale, ui } from "../i18n/ui";
import LanguageSwitcher from "./LanguageSwitcher.astro";

const locale = getLocale(Astro.currentLocale);
const dict = (ui as any)?.[locale] ?? (ui as any)?.es ?? (ui as any)?.en ?? (ui as any)?.pt ?? {};

const footer = (dict as any)?.footer ?? (dict as any)?.common?.footer ?? {};
const withLocale = (path: string) => `/${locale}/${path}`.replace(/\/+$/, "/");

const year = new Date().getFullYear();

// textos com fallback (pra não quebrar se faltar chave)
const t = {
  ready: footer?.ready ?? "Ready to start?",
  title: footer?.title ?? "Let’s build.",
  cta: footer?.cta ?? "Contact",
  rights: footer?.rights ?? "All rights reserved.",
  terms: footer?.terms ?? "Terms",
  privacy: footer?.privacy ?? "Privacy",
  top: footer?.top ?? "Top",
};

const links = {
  contact: withLocale("contact/"),
  terms: withLocale("terminos-y-condiciones/"),
  privacy: withLocale("politica-de-privacidad/"),
  blog: withLocale("blog/"),
};
---

<footer class="relative bg-[#050505] text-white pt-20 pb-10 px-6 overflow-hidden border-t border-white/5">
  <div class="max-w-7xl mx-auto flex flex-col items-center">
    <!-- Texto de Entrada -->
    <p class="text-gray-400 text-sm md:text-base mb-2 font-medium tracking-wide">
      {t.ready}
    </p>

    <!-- Título Principal -->
    <h2 class="text-6xl md:text-8xl lg:text-9xl font-bold tracking-tighter mb-16 text-center text-white">
      {t.title}
    </h2>

    <!-- Área de Interação -->
    <div class="w-full grid grid-cols-1 lg:grid-cols-3 items-center gap-10 lg:gap-0 border-y border-white/10 py-12 md:py-20">
      <!-- Email -->
      <div class="flex justify-center lg:justify-start">
        <a
          href="mailto:info@iaoperators.com"
          class="text-xl md:text-3xl font-bold hover:text-orange-500 transition-all duration-300 hover:scale-105 origin-center lg:origin-left"
        >
          info@iaoperators.com
        </a>
      </div>

      <!-- CTA -->
      <div class="flex justify-center">
        <a
          href={links.contact}
          class="group relative flex items-center justify-center w-40 h-40 md:w-48 md:h-48 rounded-full border border-white/20 bg-transparent hover:bg-white transition-all duration-500 hover:scale-110"
        >
          <span class="text-base md:text-lg font-medium text-white group-hover:text-black transition-colors duration-300">
            {t.cta}
          </span>
        </a>
      </div>

      <!-- WhatsApp -->
      <div class="flex items-center justify-center lg:justify-end gap-4 group cursor-pointer">
        <div class="w-10 h-10 rounded-full border border-white/30 flex items-center justify-center group-hover:border-orange-500 group-hover:rotate-45 transition-all duration-500">
          <div class="w-1 h-4 bg-white group-hover:bg-orange-500 transition-colors" />
        </div>

        <a
          href="https://wa.me/34662423523"
          class="text-xl md:text-3xl font-bold hover:text-orange-500 transition-all duration-300 hover:scale-105 origin-center lg:origin-right"
          target="_blank"
          rel="noopener noreferrer"
        >
          +34 662423523
        </a>
      </div>
    </div>

    <!-- Rodapé Inferior -->
    <div class="w-full flex flex-col md:flex-row items-center justify-between mt-12 gap-6 relative">
      <!-- Copyright + Legal -->
      <div class="flex flex-col md:flex-row items-center gap-4 text-gray-500 text-xs md:text-sm order-2 md:order-1">
        <span>
          © {year} IA Operators. {t.rights}
        </span>

        <div class="flex flex-wrap items-center gap-3 justify-center">
          <span class="hidden md:inline text-white/20">|</span>

          <a href={links.terms} class="hover:text-orange-500 transition-colors">
            {t.terms}
          </a>

          <span class="text-white/20">•</span>

          <a href={links.privacy} class="hover:text-orange-500 transition-colors">
            {t.privacy}
          </a>

          <span class="text-white/20">•</span>

          <!-- Cookies: reabre preferências via evento -->
          <button
            type="button"
            id="open-cookies"
            class="hover:text-orange-500 transition-colors"
          >
            Cookies
          </button>
        </div>
      </div>

      <!-- Redes + Idioma -->
      <div class="flex gap-6 order-1 md:order-2 items-center">
        <!-- X -->
        <a
          href="https://x.com/LuizBrazaoAI"
          target="_blank"
          rel="noopener noreferrer"
          class="text-gray-400 hover:text-orange-500 hover:-translate-y-1 transition-all duration-300"
          aria-label="X"
        >
          <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" />
          </svg>
        </a>

        <!-- Instagram -->
        <a
          href="https://www.instagram.com/iaoperators/"
          target="_blank"
          rel="noopener noreferrer"
          class="text-gray-400 hover:text-orange-500 hover:-translate-y-1 transition-all duration-300"
          aria-label="Instagram"
        >
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5Z" stroke="currentColor" stroke-width="2"/>
            <path d="M12 16a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z" stroke="currentColor" stroke-width="2"/>
            <path d="M17.5 6.5h.01" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
          </svg>
        </a>

        <!-- LinkedIn -->
        <a
          href="https://www.linkedin.com/in/ferbrazao/"
          target="_blank"
          rel="noopener noreferrer"
          class="text-gray-400 hover:text-orange-500 hover:-translate-y-1 transition-all duration-300"
          aria-label="LinkedIn"
        >
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M4 4h4v16H4V4Z" stroke="currentColor" stroke-width="2"/>
            <path d="M10 10h4v2c.6-1.2 2-2.2 4-2.2 3 0 4 1.9 4 5V20h-4v-5c0-1.6-.3-2.7-1.7-2.7-1.3 0-2.3 1-2.3 2.7V20h-4V10Z" stroke="currentColor" stroke-width="2"/>
            <path d="M6 7a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z" fill="currentColor"/>
          </svg>
        </a>

        <!-- YouTube -->
        <a
          href="https://www.youtube.com/@IAOperators"
          target="_blank"
          rel="noopener noreferrer"
          class="text-gray-400 hover:text-orange-500 hover:-translate-y-1 transition-all duration-300"
          aria-label="YouTube"
        >
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M21 8.5s-.2-1.6-.8-2.3c-.8-.9-1.7-.9-2.1-1C15.6 5 12 5 12 5h0s-3.6 0-6.1.2c-.4.1-1.3.1-2.1 1C3.2 6.9 3 8.5 3 8.5S2.8 10.3 2.8 12v0c0 1.7.2 3.5.2 3.5s.2 1.6.8 2.3c.8.9 1.9.9 2.4 1 1.7.2 5.8.2 5.8.2s3.6 0 6.1-.2c.4-.1 1.3-.1 2.1-1 .6-.7.8-2.3.8-2.3s.2-1.8.2-3.5v0c0-1.7-.2-3.5-.2-3.5Z" stroke="currentColor" stroke-width="2"/>
            <path d="M10 15V9l6 3-6 3Z" fill="currentColor"/>
          </svg>
        </a>

        <div class="h-4 w-px bg-white/20 mx-2 hidden md:block"></div>

        <!-- Reusa seu LanguageSwitcher -->
        <LanguageSwitcher />
      </div>

      <!-- Back to Top -->
      <button
        type="button"
        class="hidden md:flex absolute right-0 bottom-0 translate-x-full md:translate-x-0 md:relative items-center gap-2 text-xs font-bold text-gray-500 hover:text-white transition-colors rotate-90 md:rotate-0 origin-right"
        onclick="window.scrollTo({ top: 0, behavior: 'smooth' })"
      >
        {t.top}
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M12 5l7 7-1.4 1.4L13 8.8V19h-2V8.8L6.4 13.4 5 12l7-7Z" fill="currentColor" />
        </svg>
      </button>
    </div>
  </div>
</footer>

<script is:inline>
  document.getElementById("open-cookies")?.addEventListener("click", () => {
    window.dispatchEvent(new CustomEvent("iaoperators:open-cookies"));
  });
</script>
