
---
import { SOCIAL_ICONS } from "../../components/social-icons";

const { testimonial, socials } = Astro.props as {
  testimonial: {
    title: string;
    trustedBy: string;
    paragraphs?: string[];
  };
  socials?: { label?: string; href: string }[];
};


const PARTNER_LOGOS = [
  { src: "https://ia-operators.s3.eu-north-1.amazonaws.com/IA+Operators+Website/logoB2W.png", alt: "B2W" },
  { src: "https://ia-operators.s3.eu-north-1.amazonaws.com/IA+Operators+Website/logoAmericanasBranco.svg", alt: "Americanas" },
  { src: "https://ia-operators.s3.eu-north-1.amazonaws.com/IA+Operators+Website/logoRocket.png", alt: "Rocket Internet" },
  { src: "https://ia-operators.s3.eu-north-1.amazonaws.com/IA+Operators+Website/logoWalmart.png", alt: "Walmart" },
  { src: "https://ia-operators.s3.eu-north-1.amazonaws.com/IA+Operators+Website/logoHavas.png", alt: "Havas" }
];

const PARTNER_LOGOS_REPEATED = [
  ...PARTNER_LOGOS,
  ...PARTNER_LOGOS,
  ...PARTNER_LOGOS,
  ...PARTNER_LOGOS,
];
---

<style is:global>
@keyframes infinite-scroll {
  from { transform: translateX(0); }
  to { transform: translateX(-50%); }
}
.animate-infinite-scroll {
  animation: infinite-scroll 40s linear infinite;
}
</style>

<section id="testimonials" class="py-24 px-4 bg-linear-to-b from-transparent to-[#0a0a0a]">
  <div class="max-w-5xl mx-auto bg-black border border-white/5 rounded-[40px] p-8 md:p-12 flex flex-col md:flex-row items-center gap-12">
    <img
      src="https://framerusercontent.com/images/F57rOWtJqaFD6Xm3xWmqp6bM.png"
      alt="Luiz BrazÃ£o"
      class="w-64 h-64 md:w-80 md:h-80 rounded-3xl object-cover shadow-2xl rotate-3"
      loading="lazy"
      decoding="async"
    />

    <div class="flex-1">
      <h2 class="text-3xl font-bold mb-6 text-white">
        {testimonial.title}
      </h2>

      <div class="space-y-4 text-gray-400 leading-relaxed">
        {(testimonial.paragraphs ?? []).map((text: string) => (
          <p>{text}</p>
        ))}
      </div>

      <div class="flex gap-4 mt-8">
        {(socials ?? []).map((s: { label?: string; href: string }) => {
          const label = s.label ?? "Social";
          const icon = SOCIAL_ICONS[label] ?? "";
          return (
          <a
            href={s.href}
            target="_blank"
            rel="noopener noreferrer"
            class="p-2 bg-white/5 rounded-full hover:bg-orange-500 hover:text-white transition-all duration-300"
            aria-label={label}
          >
            <span set:html={icon} />
          </a>
       );
       })}
      </div>

    </div>
  </div>

  <div class="max-w-4xl mx-auto mt-16 text-center">
    <p class="text-gray-500 mb-8 text-sm uppercase tracking-widest">
      {testimonial.trustedBy}
    </p>

    <div class="w-full inline-flex flex-nowrap overflow-hidden mask-[linear-gradient(to_right,transparent_0,black_100px,black_calc(100%-100px),transparent_100%)]">
      <ul class="flex items-center justify-center md:justify-start [&_li]:mx-8 [&_img]:max-w-none animate-infinite-scroll">
        {PARTNER_LOGOS_REPEATED.map((logo) => (
          <li>
            <img
              src={logo.src}
              alt={logo.alt}
              class="h-10 md:h-12 w-auto object-contain grayscale opacity-60 hover:grayscale-0 hover:opacity-100 transition-all duration-300"
              loading="lazy"
              decoding="async"
            />
          </li>
        ))}
      </ul>
    </div>
  </div>
</section>
